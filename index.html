<!doctype html>
<html>
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head>
<body>
  <h2>Event Feedback</h2>

  <form id="feedbackForm" action="https://script.google.com/macros/s/AKfycbzqOxa8ZvNV7XK2ACABVt129BF70dHaG75mvMMSVEIlPnVedYD51OoA38Pi3OL5gbCioQ/exec" method="POST" target="thankwin">
    <input name="feedback" id="feedback" type="text" placeholder="Enter a word..." required />
    <button type="submit" id="submitBtn">Submit</button>
  </form>

  <script>
    document.getElementById('feedbackForm').addEventListener('submit', function(e){
      // MUST open window in submit handler (user gesture) to avoid popup blockers
      var win = window.open('about:blank', 'thankwin'); // same name used by form target
      if (!win) {
        // popup blocked — as fallback allow navigation in same tab (will still redirect)
        console.warn('Popup blocked - fallback to same-tab navigation.');
      } else {
        try { win.document.title = "Processing…"; } catch(err){}
      }
      // the form will now submit into the thankwin and the Apps Script response will replace it to Netlify thankyou
    });
  </script>
</body>
</html>
