<script>
  (function(){
    var form = document.getElementById('feedbackForm');
    var submitBtn = document.getElementById('submitBtn');
    
    // Double-check this is your CURRENT Web App URL
    var scriptURL = "https://script.google.com/macros/s/AKfycbzqOxa8ZvNV7XK2ACABVt129BF70dHaG75mvMMSVEIlPnVedYD51OoA38Pi3OL5gbCioQ/exec";

    form.addEventListener('submit', function(e){
      e.preventDefault();

      submitBtn.disabled = true;
      submitBtn.innerText = 'Sending...';

      // 1. Get the feedback text directly
      var feedbackVal = document.getElementById('feedbackInput').value;

      // 2. Create URL-encoded data (Key=Value format)
      // This is much easier for Google Apps Script to read than FormData
      var params = new URLSearchParams();
      params.append('feedback', feedbackVal);

      // 3. Send using fetch
      fetch(scriptURL, { 
          method: 'POST', 
          body: params,
          mode: 'no-cors', // Important for cross-domain requests
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
          }
      })
      .then(function(response) {
         // Success!
         window.location.href = "https://ltcawaydaydec2025.netlify.app/thankyou.html";
      })
      .catch(function(error) {
         console.error('Error!', error.message);
         // Redirect anyway so the user doesn't get stuck
         window.location.href = "https://ltcawaydaydec2025.netlify.app/thankyou.html";
      });
    });
  })();
</script>
